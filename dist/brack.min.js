const{sum}=require("styp"),Literals=sum("Literals",{Number:["v"],String:["v"],Bool:["v"],Quote:["v"]}),white=[" ","\n","\b","\t","\r"];function isWhite(a){return white.includes(a)}const digits=["0","1","2","3","4","5","6","7","8","9"];function isNumber(a){return digits.includes(a)}function isAlphabet(a){if(a){const b=a.charCodeAt(0);return b>=97&&b<=122||b>=65&&b<=90}return!1}function isBool(a){return"true"==a||"false"==a}function parseI(a,b=["(",")"]){let c=a[0];if(isWhite(c))for(a.shift(),c=a[0];isWhite(c);)a.shift(),c=a[0];if(c!==b[1]){if(c===b[0]){a.shift();const d=[];for(c=a[0];c&&c!==b[1];){let e=parseI(a,b);e&&d.push(e),c=a[0]}if(c=a.shift(),c!==b[1])throw new Error(`Expected ${b[1]}`);return d}if("'"===c)return a.shift(),Literals.Quote(parseI(a,b));if("\""===c){a.shift(),c=a[0];let b="";for(;c&&"\""!==c;)b+=c,a.shift(),c=a[0];if(a.shift(),"\""!==c)throw new Error("Required `\"`");return Literals.String(b)}if(isAlphabet(c)||"_"===c){let b=a.shift();for(c=a[0];isAlphabet(c)||isNumber(c)||"_"===c;)a.shift(),b+=c,c=a[0];return isBool(b)?Literals.Bool("true"==b):b}if(isNumber(c)){let b=!1,d=a.shift();for(c=a[0],"."===c&&(d+=a.shift(),b=!0,c=a[0]);isNumber(c)||"."===c;){if("."===c&&b)throw new Error("two dots not allowed");a.shift(),d+=c,"."===c&&(b=!0),c=a[0]}return b?Literals.Number(parseFloat(d)):Literals.Number(parseInt(d))}return a.shift()}}function parse(a,b=["(",")"]){"string"==typeof a&&(a=a.split(""));const c=[];for(;0<a.length;){const d=parseI(a,b);d&&c.push(d)}return c}module.exports={parse,Literals};